(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9034:function(e,t,n){Promise.resolve().then(n.bind(n,4424))},4424:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var o=n(3827),i=n(575),a=n(4090),l=n(7067),d=n(8374),s=n(7330),r=n(1772),u=n(9608),c=n(9369),f=n(8636),m=n(489),h=n(5330),x=n(5099),v=n(7841),p=n(1930),g=n(5159),w=n(3441),b=n(6466),y=n(5297),S=n(2169),j=n(8251),z=n(8993),N=n(5364),L=n(1348),O=n(2684),M=n(5590),k=n(7805),X=n(9259),E=n(7501);let C=M.fC,Z=M.xz;M.ZA,M.Uv,M.Tr,M.Ee;let P=a.forwardRef((e,t)=>{let{className:n,inset:i,children:a,...l}=e;return(0,o.jsxs)(M.fF,{ref:t,className:(0,S.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",i&&"pl-8",n),...l,children:[a,(0,o.jsx)(k.Z,{className:"ml-auto h-4 w-4"})]})});P.displayName=M.fF.displayName,a.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,o.jsx)(M.tu,{ref:t,className:(0,S.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...i})}).displayName=M.tu.displayName;let A=a.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,o.jsx)(M.Uv,{children:(0,o.jsx)(M.VY,{ref:t,className:(0,S.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...i})})});A.displayName=M.VY.displayName;let I=a.forwardRef((e,t)=>{let{className:n,inset:i,...a}=e;return(0,o.jsx)(M.ck,{ref:t,className:(0,S.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i&&"pl-8",n),...a})});I.displayName=M.ck.displayName,a.forwardRef((e,t)=>{let{className:n,children:i,checked:a,...l}=e;return(0,o.jsxs)(M.oC,{ref:t,className:(0,S.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:a,...l,children:[(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(M.wU,{children:(0,o.jsx)(X.Z,{className:"h-4 w-4"})})}),i]})}).displayName=M.oC.displayName,a.forwardRef((e,t)=>{let{className:n,children:i,...a}=e;return(0,o.jsxs)(M.Rk,{ref:t,className:(0,S.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...a,children:[(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(M.wU,{children:(0,o.jsx)(E.Z,{className:"h-2 w-2 fill-current"})})}),i]})}).displayName=M.Rk.displayName,a.forwardRef((e,t)=>{let{className:n,inset:i,...a}=e;return(0,o.jsx)(M.__,{ref:t,className:(0,S.cn)("px-2 py-1.5 text-sm font-semibold text-foreground",i&&"pl-8",n),...a})}).displayName=M.__.displayName,a.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,o.jsx)(M.Z0,{ref:t,className:(0,S.cn)("-mx-1 my-1 h-px bg-border",n),...i})}).displayName=M.Z0.displayName;var R=n(7907),_=n(7147),T=n(248);function U(){let[e,t]=(0,a.useState)([]),[n,k]=(0,a.useState)([]),[X,E]=(0,a.useState)(),[U,H]=(0,a.useState)(),F=(0,a.useRef)(null),[Y,B]=(0,a.useState)(!1),D=(0,R.useRouter)(),{scrollY:V}=(0,z.v)({container:F});(0,N.W)(V,"change",e=>{X&&e>0&&(0,d.th)({userId:null==X?void 0:X.id,scrollY:e})});let q=e=>{var t;null===(t=F.current)||void 0===t||t.scrollTo({top:e,behavior:"smooth"})},G=e=>{let t=Number(e);return console.log("userY: ",e),100+Math.floor(e/1e3)*(t>5e3?40:t>1e4?60:t>15e3?70:t>3e4?100:20)};(0,a.useEffect)(()=>{(0,d.xe)().then(()=>{(0,d.Rf)().then(e=>{(null==e?void 0:e.length)!==0&&e?(0,d.QQ)().then(t=>{if(t&&(null==t?void 0:t.userId)!==-1){for(let n of e)if(n.id===Number(null==t?void 0:t.userId)){E(n);break}}else(0,d.xe)().then(()=>{D.push("/",{scroll:!1})})}):(0,d.xe)().then(()=>{D.push("/profiles/createUser",{scroll:!1})})})})},[D]),(0,a.useEffect)(()=>{F.current&&(F.current.style.maxHeight="0px"),X&&!Y&&(0,d.N)({userId:null==X?void 0:X.id}).then(e=>{0!==e&&null!=e&&console.log("User scroll: ",e),F.current&&setTimeout(()=>{e>0&&null!=e&&q(e),F.current&&F.current&&(F.current.style.maxHeight="100vh"),console.log("scrolling to ",e)},G(e))})},[X,Y]),(0,a.useEffect)(()=>{B(!0),console.log(X),(null==X?void 0:X.id)&&(0,d.xh)({userId:null==X?void 0:X.id}).then(e=>{if(e)for(let n of(console.log("folders for user ".concat(null==X?void 0:X.id," "),e),e))n.asChild||t(e=>[...e,n.path])}).finally(()=>{(null==X?void 0:X.id)&&(0,d.nS)({userId:null==X?void 0:X.id}).then(e=>{e&&(console.log("user settings:",e),H(e))}),B(!1)})},[X]);let Q=i=>{let{folderPath:l,asChild:b}=i,[z,N]=(0,a.useState)([]),[E,R]=(0,a.useState)([]),[_,H]=(0,a.useState)(),[F,Y]=(0,a.useState)([]),[B,V]=(0,a.useState)([]),[q,G]=(0,a.useState)(!1),[J,K]=(0,a.useState)(!1),[$,ee]=(0,a.useState)(),[et,en]=(0,a.useState)(!1);(0,a.useEffect)(()=>{G(!1),(0,y.oc)(l).then(e=>{if(e){let t=e.filter(e=>W.includes(e.path.replace(/^.*\./,""))&&!e.children).filter(e=>null!=e),n=e.filter(e=>"srt"===e.path.split(".").pop()),o=e.filter(e=>e.children);N(t),R(o),Y(n),G(!0)}})},[l]),(0,a.useEffect)(()=>{X&&(K(!0),(0,d.xh)({userId:X.id}).then(e=>{if(e&&e.length>0)for(let t of e)t.path===l&&t.expanded&&(console.log("SET expanded to TRUE from UE on START => ",l),t.color&&ee(t.color),H(!0))}).finally(()=>{K(!1)}))},[l]),(0,a.useEffect)(()=>{X&&(0,d.z7)({userId:null==X?void 0:X.id}).then(e=>{if(e&&e.length>0){let t=e.sort((e,t)=>{let n=e.lastWatchedAt?new Date(e.lastWatchedAt).getTime():0;return(t.lastWatchedAt?new Date(t.lastWatchedAt).getTime():0)-n}).slice(0,5),n=0;for(let e of t)e.userId===X.id&&e.path.includes(l)&&e.watched&&e.lastWatchedAt&&(new Date().getTime()-new Date(e.lastWatchedAt).getTime())/864e5<1&&n<3&&(console.log("Video was watched less than a day ago"),n+=1);n>0&&n<5?en(!0):en(!1)}else en(!1)}).catch(e=>{console.error(e),en(!1)})},[l]),(0,a.useEffect)(()=>{X&&q&&void 0!==_&&(0,d.lY)({folderPath:l,expanded:_,userId:null==X?void 0:X.id,asChild:b||!1}).then(()=>{})},[b,_,q,l]),(0,a.useEffect)(()=>{console.log("Fetching videos information");let e=[];X&&z.length>0&&q&&(K(!0),Promise.all(z.map(e=>(0,d.om)({videoPath:e.path,userId:X.id}))).then(t=>{for(let n of t)n&&e.push(n)}).finally(()=>{V(e),K(!1)}))},[z,q]);let eo=e=>{let t=B.find(t=>t.path===e.path&&t.watched);return!t||!t.watched};return(0,o.jsxs)("main",{className:"my-1 h-full w-full rounded-b-md",children:[(0,o.jsxs)(C,{children:[(0,o.jsx)(Z,{children:(0,o.jsx)(L.M,{children:(0,o.jsxs)(O.E.div,{initial:(null==U?void 0:U.animations)==="On"?{opacity:0}:void 0,animate:(null==U?void 0:U.animations)==="On"?{opacity:1}:void 0,exit:(null==U?void 0:U.animations)==="On"?{opacity:0}:void 0,transition:{duration:.5,damping:.5},style:{...$?{backgroundColor:"".concat($),borderBottom:"1px solid ".concat($)}:{},..._&&!b?{padding:"6.5px"}:{}},className:(0,S.cn)("flex cursor-pointer flex-row items-center justify-between border-tertiary rounded-sm p-1 bg-muted break-keep",_&&z.length>0&&!b&&"rounded-b-none border-b-4",_&&E.length>0&&!b&&"rounded-b-none border-b-4",_&&b&&"border-none rounded-sm",b&&_&&"p-1 border-none rounded-b-none",!b&&_&&"border-none",b&&"shadow-sm rounded-t-none bg-muted flex flex-col",(null==U?void 0:U.animations)==="Off"&&"hover:opacity-80"),onClick:e=>{(z.length>0||E.length>0)&&H(!_)},whileHover:(null==U?void 0:U.animations)!=="On"||b?void 0:{padding:"6.5px"},children:[(0,o.jsxs)("div",{className:(0,S.cn)("flex flex-row items-center justify-start gap-1 font-medium text-primary text-sm text-center w-full pb-1.5 drop-shadow-md "),children:[b&&!_?(0,o.jsx)(O.E.div,{className:"flex items-start justify-center",initial:(null==U?void 0:U.animations)==="On"?{y:-20,opacity:0}:void 0,animate:(null==U?void 0:U.animations)==="On"?{y:0,opacity:1}:void 0,exit:(null==U?void 0:U.animations)==="On"?{y:-20,opacity:0}:void 0,transition:{duration:.3,damping:.3},children:(0,o.jsx)(s.Z,{className:(0,S.cn)("h-auto w-4",(null==U?void 0:U.fontSize)==="Medium"&&"h-auto w-5",(null==U?void 0:U.fontSize)==="Large"&&"h-auto w-6",(null==U?void 0:U.fontSize)==="XLarge"&&"h-auto w-7")})},l+"not expanded5"):(0,o.jsx)(O.E.div,{className:"flex items-start justify-center",initial:(null==U?void 0:U.animations)==="On"?{y:-50,opacity:0}:void 0,animate:(null==U?void 0:U.animations)==="On"?{y:0,opacity:1}:void 0,exit:(null==U?void 0:U.animations)==="On"?{y:-50,opacity:0}:void 0,transition:{duration:.7,bounce:.2,type:"spring"},children:b&&_&&(0,o.jsx)(r.Z,{className:(0,S.cn)("h-auto w-5 px-0.5",(null==U?void 0:U.fontSize)==="Medium"&&"h-auto w-6",(null==U?void 0:U.fontSize)==="Large"&&"h-auto w-7",(null==U?void 0:U.fontSize)==="XLarge"&&"h-auto w-8",z.length<0||E.length<0&&"hidden")})},l+"expanded1"),0===E.length&&0===z.length?(0,o.jsx)("span",{className:(0,S.cn)("line-through",(null==U?void 0:U.fontSize)==="Medium"&&"text-lg",(null==U?void 0:U.fontSize)==="Large"&&"text-2xl",(null==U?void 0:U.fontSize)==="XLarge"&&"text-3xl",(null==U?void 0:U.fontSize)==="Medium"&&b&&"text-lg",(null==U?void 0:U.fontSize)==="Large"&&b&&"text-xl",(null==U?void 0:U.fontSize)==="XLarge"&&b&&"text-2xl"),children:l.replace(/\\/g,"/").split("/").pop()}):(0,o.jsx)("span",{className:(0,S.cn)("text-base font-bold",(null==U?void 0:U.fontSize)==="Medium"&&"text-lg",(null==U?void 0:U.fontSize)==="Large"&&"text-2xl",(null==U?void 0:U.fontSize)==="XLarge"&&"text-3xl",(null==U?void 0:U.fontSize)==="Medium"&&b&&"text-lg",(null==U?void 0:U.fontSize)==="Large"&&b&&"text-xl",(null==U?void 0:U.fontSize)==="XLarge"&&b&&"text-2xl"),children:l.replace(/\\/g,"/").split("/").pop()}),E.length>0&&(0,o.jsxs)("div",{className:(0,S.cn)("flex flex-row items-center justify-center gap-0.5 rounded-md bg-tertiary px-0.5",b&&"p-0.5 brightness-[1.15]"),style:{...$?{backgroundColor:"".concat($," ")}:{}},children:[(0,o.jsx)(u.Z,{className:(0,S.cn)("h-auto w-4",(null==U?void 0:U.fontSize)==="Medium"&&!b&&"h-auto w-4",(null==U?void 0:U.fontSize)==="Large"&&!b&&"h-auto w-5",(null==U?void 0:U.fontSize)==="XLarge"&&!b&&"h-auto w-6")}),(0,o.jsx)("span",{className:(0,S.cn)("text-xs lg:text-sm font-bold",(null==U?void 0:U.fontSize)==="Medium"&&!b&&"text-sm",(null==U?void 0:U.fontSize)==="Large"&&!b&&"text-base",(null==U?void 0:U.fontSize)==="XLarge"&&!b&&"text-lg"),children:E.length>0&&E.length})]}),z.length>0&&(0,o.jsxs)("div",{className:(0,S.cn)("flex flex-row items-center justify-center text-sm rounded-md bg-tertiary px-0.5 gap-0.5 ",b&&"p-0.5 brightness-[1.15]"),style:{...$?{backgroundColor:"".concat($," ")}:{}},children:[(0,o.jsx)(c.Z,{className:(0,S.cn)("h-auto w-4",(null==U?void 0:U.fontSize)==="Medium"&&!b&&"h-auto w-4",(null==U?void 0:U.fontSize)==="Large"&&!b&&"h-auto w-5",(null==U?void 0:U.fontSize)==="XLarge"&&!b&&"h-auto w-6")}),(0,o.jsx)("span",{className:(0,S.cn)("text-xs lg:text-sm font-bold",(null==U?void 0:U.fontSize)==="Medium"&&!b&&"text-sm",(null==U?void 0:U.fontSize)==="Large"&&!b&&"text-base",(null==U?void 0:U.fontSize)==="XLarge"&&!b&&"text-lg"),children:z.length>0&&z.length})]}),F.length>0&&(0,o.jsxs)("div",{className:(0,S.cn)("flex flex-row items-center justify-center text-xs rounded-md bg-tertiary px-0.5 gap-0.5",b&&"p-0.5 brightness-[1.15]"),style:{...$?{backgroundColor:"".concat($," ")}:{}},children:[(0,o.jsx)(f.Z,{className:(0,S.cn)("h-auto w-4",(null==U?void 0:U.fontSize)==="Medium"&&!b&&"h-auto w-4",(null==U?void 0:U.fontSize)==="Large"&&!b&&"h-auto w-5",(null==U?void 0:U.fontSize)==="XLarge"&&!b&&"h-auto w-6")}),(0,o.jsx)("span",{className:(0,S.cn)("text-xs lg:text-sm font-bold",(null==U?void 0:U.fontSize)==="Medium"&&!b&&"text-sm",(null==U?void 0:U.fontSize)==="Large"&&!b&&"text-base",(null==U?void 0:U.fontSize)==="XLarge"&&!b&&"text-lg"),children:F.length>0&&F.length})]})]}),!0!==b&&(0,o.jsx)(O.E.span,{whileHover:(null==U?void 0:U.animations)==="On"?{scale:1.1}:void 0,whileTap:(null==U?void 0:U.animations)==="On"?{scale:.9}:void 0,className:"drop-shadow-md",children:(0,o.jsx)(m.Z,{className:(0,S.cn)("rounded-lg p-0.5 text-primary hover:bg-background h-auto w-6 drop-shadow-md",(null==U?void 0:U.fontSize)==="Medium"&&"h-auto w-7",(null==U?void 0:U.fontSize)==="Large"&&"h-auto w-8",(null==U?void 0:U.fontSize)==="XLarge"&&"h-auto w-9"),onClick:o=>{o.stopPropagation(),(0,d.Go)({folderPath:l}).then(()=>{t(e.filter(e=>e!==l)),k(n.filter(e=>e!==l)),D.refresh()})}})})]},"main-parent-folder+folder")})}),(0,o.jsx)(A,{children:(0,o.jsxs)(I,{className:"flex cursor-pointer items-center gap-1 font-medium",onClick:e=>{0!==e.button||J||(K(!0),(0,j.dw)("show_in_folder",{path:"".concat(l)}).then(e=>{K(!1)}))},children:[(0,o.jsx)("span",{className:(0,S.cn)("",(null==U?void 0:U.fontSize)==="Medium"&&"text-base",(null==U?void 0:U.fontSize)==="Large"&&"text-lg",(null==U?void 0:U.fontSize)==="XLarge"&&"text-xl"),children:"Open In Explorer"}),(0,o.jsx)(h.Z,{className:(0,S.cn)("h-auto w-4",(null==U?void 0:U.fontSize)==="Medium"&&"h-auto w-5",(null==U?void 0:U.fontSize)==="Large"&&"h-auto w-6",(null==U?void 0:U.fontSize)==="XLarge"&&"h-auto w-7")})]})})]},l+"main-parent-context-menu"),_&&z.filter(e=>!e.children).map((e,t)=>{var n,i,a;return(0,o.jsx)(C,{children:(0,o.jsxs)(Z,{children:[(0,o.jsx)(O.E.li,{className:(0,S.cn)("flex flex-col items-start justify-center gap-1 border-b-2 py-1.5 px-4 cursor-pointer overflow-hidden",t===z.length-1&&"rounded-b-md border-none",(null==U?void 0:U.animations)==="Off"&&"hover:opacity-50",t%2&&"brightness-110",!(t%2)&&"brightness-125",B.some(t=>t.path===e.path&&t.watched)&&"animate-pulse shadow-lg brightness-95"),style:{...$&&t%2?{backgroundColor:"".concat($)}:{},...$&&!(t%2)?{backgroundColor:"".concat($)}:{}},onClick:t=>{!J&&q&&X&&(0,d.oj)({videoPath:e.path,user:X,watched:!0}).then(()=>(0,d.xe)()).finally(()=>{(0,j.dw)("open_video",{path:e.path,userId:T.Z_})})},initial:(null==U?void 0:U.animations)==="On"?{opacity:0,x:-20}:void 0,animate:(null==U?void 0:U.animations)==="On"?{opacity:1,x:0}:void 0,exit:(null==U?void 0:U.animations)==="On"?{opacity:0,x:-20}:void 0,whileHover:(null==U?void 0:U.animations)==="On"?{x:1.5}:void 0,transition:{duration:.5,type:"spring",bounce:.4},children:(0,o.jsxs)(O.E.div,{className:(0,S.cn)("text-base flex flex-row items-start justify-center gap-1 font-medium select-none text-center",e.name&&(null===(n=e.name)||void 0===n?void 0:n.length)>20&&"overflow-hidden whitespace-nowrap"),whileHover:(null==U?void 0:U.animations)==="On"&&e.name&&(null===(i=e.name)||void 0===i?void 0:i.length)>65?{width:"-100%"}:void 0,transition:{duration:1,damping:.2},children:[(0,o.jsx)(x.Z,{className:(0,S.cn)("h-auto w-3",e.name&&(null===(a=e.name)||void 0===a?void 0:a.length)>100&&"items-start justify-center gap-1 p-0",(null==U?void 0:U.fontSize)==="Medium"&&"h-auto w-4",(null==U?void 0:U.fontSize)==="Large"&&"h-auto w-5",(null==U?void 0:U.fontSize)==="XLarge"&&"h-auto w-6")}),B.some(t=>(null==t?void 0:t.path)===(null==e?void 0:e.path)&&null!=t&&!!t.watched)?(0,o.jsxs)(O.E.div,{className:(0,S.cn)("flex flex-row items-center justify-center gap-1 rounded-sm px-0.5 font-bold",et&&"animate-pulse"),initial:(null==U?void 0:U.animations)==="On"?{opacity:0,x:-20}:void 0,animate:(null==U?void 0:U.animations)==="On"?{opacity:1,x:0}:void 0,exit:(null==U?void 0:U.animations)==="On"?{opacity:0,x:-20}:void 0,whileHover:(null==U?void 0:U.animations)==="On"?{x:1.5}:void 0,transition:{duration:.5,bounce:.4,type:"spring"},children:[(0,o.jsx)(O.E.div,{className:(0,S.cn)("",(null==U?void 0:U.animations)==="Off"&&"hover:opacity-20"),initial:(null==U?void 0:U.animations)==="On"?{x:-20,opacity:0}:void 0,animate:(null==U?void 0:U.animations)==="On"?{x:0,opacity:1}:void 0,exit:(null==U?void 0:U.animations)==="On"?{x:-20,opacity:0}:void 0,transition:{duration:.35,bounce:.3,type:"spring"},whileHover:(null==U?void 0:U.animations)==="On"?{scale:1.15}:void 0,whileTap:(null==U?void 0:U.animations)==="On"?{scale:.9}:void 0,onClick:t=>{t.stopPropagation(),X&&(G(!1),(0,d.oj)({videoPath:e.path,user:X,watched:!1}).finally(()=>{G(!0),K(!1)}))},children:(0,o.jsx)(v.Z,{className:(0,S.cn)("h-auto w-4 mr-0.5 ",(null==U?void 0:U.fontSize)==="Medium"&&"h-auto w-5",(null==U?void 0:U.fontSize)==="Large"&&"h-auto w-6",(null==U?void 0:U.fontSize)==="XLarge"&&"h-auto w-7")})},t+"watched-video-file-nameeye-icon"),(0,o.jsx)("span",{className:(0,S.cn)("text-sm ",(null==U?void 0:U.fontSize)==="Medium"&&"text-base",(null==U?void 0:U.fontSize)==="Large"&&"text-lg",(null==U?void 0:U.fontSize)==="XLarge"&&"text-2xl"),children:e.name})]},"watched-video-file-name"+e.name+t):(0,o.jsx)(O.E.div,{className:(0,S.cn)("flex flex-row items-center justify-center gap-1 rounded-sm px-0.5 font-bold"),initial:(null==U?void 0:U.animations)==="On"?{x:20}:void 0,animate:(null==U?void 0:U.animations)==="On"?{x:0}:void 0,exit:(null==U?void 0:U.animations)==="On"?{x:20}:void 0,transition:{duration:.2,bounce:.3,type:"spring"},children:(0,o.jsx)("span",{className:(0,S.cn)("text-sm",(null==U?void 0:U.fontSize)==="Medium"&&"text-base",(null==U?void 0:U.fontSize)==="Large"&&"text-lg",(null==U?void 0:U.fontSize)==="XLarge"&&"text-2xl"),children:e.name})},"render-file-name"+e.name+"1")]},"current-video-file-name-motion-div"+e.name+t)},e.name+"current-video"+t),(0,o.jsxs)(A,{className:(0,S.cn)("",(null==U?void 0:U.animations)==="Off"&&""),children:[(0,o.jsxs)(I,{className:"cursor-pointer gap-1 font-medium",onClick:t=>{0!==t.button||J||(K(!0),(0,j.dw)("show_in_folder",{path:"".concat(e.path)}).then(e=>{K(!1)}))},children:[(0,o.jsx)("span",{className:(0,S.cn)("",(null==U?void 0:U.fontSize)==="Medium"&&"text-base",(null==U?void 0:U.fontSize)==="Large"&&"text-lg",(null==U?void 0:U.fontSize)==="XLarge"&&"text-xl"),children:"Open In Explorer"}),(0,o.jsx)(h.Z,{className:(0,S.cn)("h-auto w-4",(null==U?void 0:U.fontSize)==="Medium"&&"h-auto w-5",(null==U?void 0:U.fontSize)==="Large"&&"h-auto w-6",(null==U?void 0:U.fontSize)==="XLarge"&&"h-auto w-7")})]}),(0,o.jsx)(M.uP,{className:"my-1 h-[1px] bg-accent"}),(0,o.jsxs)(M.qu,{children:[(0,o.jsx)(P,{className:(0,S.cn)("cursor-pointer gap-1 font-medium",(null==U?void 0:U.fontSize)==="Medium"&&"text-base",(null==U?void 0:U.fontSize)==="Large"&&"text-lg",(null==U?void 0:U.fontSize)==="XLarge"&&"text-xl"),inset:!0,children:"Watch"}),(0,o.jsxs)(M.dp,{className:"mx-2 overflow-hidden rounded-md border bg-popover p-1 font-medium text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",children:[eo(e)?(0,o.jsxs)(I,{className:"flex cursor-pointer gap-1",onClick:()=>{K(!0),G(!1),(0,d.oj)({videoPath:e.path,user:X,watched:!0}).finally(()=>{G(!0),K(!1)})},children:[(0,o.jsx)("span",{className:(0,S.cn)("",(null==U?void 0:U.fontSize)==="Medium"&&"text-base",(null==U?void 0:U.fontSize)==="Large"&&"text-lg",(null==U?void 0:U.fontSize)==="XLarge"&&"text-xl"),children:"Set Watched"}),(0,o.jsx)(v.Z,{className:(0,S.cn)("h-auto w-4 ",(null==U?void 0:U.fontSize)==="Medium"&&"h-auto w-5",(null==U?void 0:U.fontSize)==="Large"&&"h-auto w-6",(null==U?void 0:U.fontSize)==="XLarge"&&"h-auto w-7")})]}):(0,o.jsxs)(I,{className:"flex cursor-pointer gap-1",onClick:t=>{X&&(G(!1),(0,d.oj)({videoPath:e.path,user:X,watched:!1}).finally(()=>{G(!0),K(!1)}))},children:[(0,o.jsx)("span",{className:(0,S.cn)("",(null==U?void 0:U.fontSize)==="Medium"&&"text-base",(null==U?void 0:U.fontSize)==="Large"&&"text-lg",(null==U?void 0:U.fontSize)==="XLarge"&&"text-xl"),children:"Unwatch"}),(0,o.jsx)(p.Z,{className:(0,S.cn)("h-auto w-4 ",(null==U?void 0:U.fontSize)==="Medium"&&"h-auto w-5",(null==U?void 0:U.fontSize)==="Large"&&"h-auto w-6",(null==U?void 0:U.fontSize)==="XLarge"&&"h-auto w-7")})]}),(0,o.jsx)(M.uP,{className:"my-1 h-[1px] bg-accent"}),(0,o.jsx)(I,{className:"cursor-pointer",onClick:e=>{(null==X?void 0:X.id)&&z.slice(t,z.length).map(e=>{X&&(G(!1),(0,d.oj)({videoPath:e.path,user:X,watched:!1}).finally(()=>{G(!0),K(!1)}))})},children:(0,o.jsxs)("div",{className:"flex gap-1",children:[(0,o.jsx)("span",{className:(0,S.cn)("",(null==U?void 0:U.fontSize)==="Medium"&&"text-base",(null==U?void 0:U.fontSize)==="Large"&&"text-lg",(null==U?void 0:U.fontSize)==="XLarge"&&"text-xl"),children:"Unwatch To"}),(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)(p.Z,{className:(0,S.cn)("h-auto w-4 ",(null==U?void 0:U.fontSize)==="Medium"&&"h-auto w-5",(null==U?void 0:U.fontSize)==="Large"&&"h-auto w-6",(null==U?void 0:U.fontSize)==="XLarge"&&"h-auto w-7")}),(0,o.jsx)(g.Z,{className:(0,S.cn)("h-auto w-4 ",(null==U?void 0:U.fontSize)==="Medium"&&"h-auto w-5",(null==U?void 0:U.fontSize)==="Large"&&"h-auto w-6",(null==U?void 0:U.fontSize)==="XLarge"&&"h-auto w-7")})]})]})}),(0,o.jsx)(I,{className:"cursor-pointer",onClick:e=>{e.stopPropagation(),G(!1),X&&z.slice(0,t+1).reverse().map(e=>{(0,d.oj)({videoPath:e.path,user:X,watched:!0}).then(()=>en(!0)).finally(()=>{G(!0)})})},children:(0,o.jsxs)("div",{className:"flex gap-1",children:[(0,o.jsx)("span",{className:(0,S.cn)("",(null==U?void 0:U.fontSize)==="Medium"&&"text-base",(null==U?void 0:U.fontSize)==="Large"&&"text-lg",(null==U?void 0:U.fontSize)==="XLarge"&&"text-xl"),children:"Watch To"}),(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)(v.Z,{className:(0,S.cn)("h-auto w-4 ",(null==U?void 0:U.fontSize)==="Medium"&&"h-auto w-5",(null==U?void 0:U.fontSize)==="Large"&&"h-auto w-6",(null==U?void 0:U.fontSize)==="XLarge"&&"h-auto w-7")}),(0,o.jsx)(w.Z,{className:(0,S.cn)("h-auto w-4 ",(null==U?void 0:U.fontSize)==="Medium"&&"h-auto w-5",(null==U?void 0:U.fontSize)==="Large"&&"h-auto w-6",(null==U?void 0:U.fontSize)==="XLarge"&&"h-auto w-7")})]})]})})]})]})]})]})},"context-menu"+t)}),_&&E.map((e,t)=>(0,o.jsx)(O.E.li,{className:(0,S.cn)("flex flex-col items-start justify-center gap-1 border-b-2 p-0.5 px-2 cursor-pointer overflow-hidden select-none",t===E.length-1&&!b&&"rounded-b-xl border-b-8 border-tertiary",b&&"rounded-b-md border-none border-tertiary"),style:{...$?{borderBottom:"8px solid ".concat($)}:{},..._&&!b?{padding:"6.5px"}:{}},initial:(null==U?void 0:U.animations)==="On"?{y:-40}:void 0,animate:(null==U?void 0:U.animations)==="On"?{opacity:1,y:0}:void 0,exit:(null==U?void 0:U.animations)==="On"?{y:-40,opacity:0}:void 0,whileHover:(null==U?void 0:U.animations)==="On"?{x:1}:void 0,transition:{duration:.3,stiffness:30},children:(0,o.jsx)(Q,{folderPath:e.path,asChild:!0})},e.name+"current-child"+t))]},l+"main-parent-folder")};return(0,o.jsx)("main",{className:(0,S.cn)("pl-3 lg:px-16 xl:px-36 2xl:px-48 mt-3 max-h-screen overflow-auto pb-5"),ref:F,style:{scrollbarGutter:"stable"},children:(0,o.jsxs)(O.E.div,{className:"mb-16 flex h-full w-full flex-col items-center justify-center gap-2 rounded-b-sm drop-shadow-sm",children:[e.map((e,t)=>(0,o.jsx)(Q,{folderPath:e},t.toString()+e)),(0,o.jsx)(L.M,{children:U&&(0,o.jsx)(O.E.div,{className:"flex h-full w-full flex-col items-start justify-center",initial:(null==U?void 0:U.animations)==="On"?{opacity:0}:void 0,animate:(null==U?void 0:U.animations)==="On"?{opacity:1}:void 0,exit:(null==U?void 0:U.animations)==="On"?{opacity:0}:void 0,transition:(null==U?void 0:U.animations)==="On"?{duration:.2,damping:5}:void 0,children:(0,o.jsxs)(i.z,{variant:"outline",className:(0,S.cn)("select-none flex flex-row justify-center items-end gap-1.5 font-bold",(null==U?void 0:U.fontSize)==="Medium"&&"text-lg mx-0",(null==U?void 0:U.fontSize)==="Large"&&"text-xl mx-0",(null==U?void 0:U.fontSize)==="XLarge"&&"text-2xl mx-0"),onClick:()=>{(0,l.bA)({directory:!0,multiple:!0,recursive:!0,filters:[{name:"Folders",extensions:[""]}],title:"Add Folder"}).then(n=>{if(X){if(Array.isArray(n))for(let o of n){if(e.some(e=>e.toString()===o)){let e=o.replaceAll("\\"," ").split(" ").pop();(0,_.Am)({title:"".concat(e," already exists!"),description:"You already have a folder with the name ".concat(e," in your library."),duration:2e3});return}(0,d.oN)({userId:null==X?void 0:X.id,folderPath:o,expanded:!1,asChild:!1}).then(()=>{t(e=>[...e,o])})}else if(null===n);else if(e.filter(e=>e===n)){let e=n.replaceAll("\\"," ").split(" ").pop();(0,_.Am)({title:"".concat(e," already exists!"),description:"You already have a folder with the name ".concat(e," in your library."),duration:2e3}),(0,d.oN)({userId:null==X?void 0:X.id,folderPath:n.toString(),expanded:!1,asChild:!1}).then(()=>{t(e=>[...e,n])})}}})},children:[(0,o.jsx)("span",{children:"Add Folder"}),(0,o.jsx)(b.Z,{className:(0,S.cn)("h-auto w-4",(null==U?void 0:U.fontSize)==="Medium"&&"h-auto w-5",(null==U?void 0:U.fontSize)==="Large"&&"h-auto w-6",(null==U?void 0:U.fontSize)==="XLarge"&&"h-auto w-7")})]})},"Add-Folder-Button")})]},"main-parent-folder"+e.length+"1")})}let W=["mp4","mkv","avi","mov","wmv","flv","webm","vob","ogv","ogg","drc","gif","gifv","mng","avi","mov","qt","wmv","yuv","rm","rmvb","asf","amv","mp4","m4p","m4v","mpg","mp2","mpeg","mpe","mpv","mpg","mpeg","m2v","m4v","svi","3gp","3g2","mxf","roq","nsv","flv","f4v","f4p","f4a","f4b"]},575:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var o=n(3827),i=n(4090),a=n(9143),l=n(7742),d=n(2169);let s=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-sm text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),r=i.forwardRef((e,t)=>{let{className:n,variant:i,size:l,asChild:r=!1,...u}=e,c=r?a.g7:"button";return(0,o.jsx)(c,{className:(0,d.cn)(s({variant:i,size:l,className:n})),ref:t,...u})});r.displayName="Button"}},function(e){e.O(0,[247,851,64,98,959,645,971,69,744],function(){return e(e.s=9034)}),_N_E=e.O()}]);